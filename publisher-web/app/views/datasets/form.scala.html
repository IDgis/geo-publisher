@import nl.idgis.publisher.domain.web._
@import nl.idgis.publisher.domain.response._

@(dataSources: Page[DataSource], categories: Page[Category], datasetForm: Form[controllers.Datasets.DatasetForm])

@implicitField = @{ helper.FieldConstructor(helper.bootstrap.bootstrapFieldConstructor.f) }

@layout.application(
	title = "Nieuwe dataset toevoegen",
	jsMain = routes.Assets.at("js/datasets/form.js").url
) {
	<div class="page-content">
		<h1 class="page-header">Nieuwe dataset toevoegen</h1>
		
		<form action="@routes.Datasets.submitCreate()" method="post" class="form-horizontal" role="form">
		
			<ul class="nav nav-tabs" role="tablist">
				<li class="active"><a href="#dataset-details" role="tab" data-toggle="tab">Algemene gegevens</a></li>
				<li id="tab-columns" class="disabled"><a href="#dataset-columns" role="tab">Kolommen <span class="badge">0</span></a></li>
				<li id="tab-filters" class="disabled"><a href="#dataset-filters" role="tab">Filters <span class="badge">0</span></a></li>
			</ul>
			
			<div class="tab-content">
			
				<div class="tab-pane active" id="dataset-details">
					<div class="row">
						<div class="col-lg-8">
							@helper.inputText(
								datasetForm("name"), 
								'_label -> "Naam", 
								'id -> "input-name", 
								'class -> "form-control", 
								'placeholder -> "Naam ...", 
								'_help -> "De naam van de dataset"
							)
							
							@helper.select(
								datasetForm("dataSourceId"),
								helper.options(
									"" -> "Selecteer een gegevensbron ..."
								) ++
								dataSources.values.map (dataSource => { dataSource.id -> dataSource.name }),
								'_label -> "Gegegensbron",
								'id -> "input-datasource",
								'class -> "form-control",
								'_help -> "De gegevensbron die de gegevens voor deze dataset bevat"
							)
							
							@helper.select(
								datasetForm("categoryId"),
								helper.options(
									"" -> "Selecteer een categorie ..."
								) ++
								categories.values.map (category => { category.id -> category.name }),
								'_label -> "Categorie",
								'id -> "input-category",
								'class -> "form-control",
								'_help -> "De categorie van de dataset"
							)

							@helper.select(
								datasetForm("sourceDatasetId"),
								helper.options(
									"" -> "Selecteer een dataset ..."
								),
								Symbol("data-original-value") -> (if(datasetForm("sourceDatasetId").value == null) "" else datasetForm("sourceDatasetId").value),
								'disabled -> "disabled",
								'_label -> "Dataset",
								'id -> "input-source-dataset",
								'class -> "form-control",
								'_help -> "De dataset uit de brongegevens waar deze dataset op is gebaseerd."
							)
						</div>						
					</div>
				</div>
				
				<div class="tab-pane" id="dataset-columns">
					<div class="row">
						<div class="col-lg-8">
							<form class="form-horizontal" role="form">
								<div class="form-group">
									<label class="col-sm-3 control-label">Geselecteerde kolommen</label>
									<div class="col-sm-9">
										<div id="column-list" class="list-group">
											
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
				
				<div class="tab-pane" id="dataset-filters">
					<div class="well">
						<p class="h1">Dataset filters zijn nog niet beschikbaar</p>
					</div>
				</div>
			
			<div>
				<button type="submit" class="btn btn-primary">Opslaan</button>
				<a href="@routes.Datasets.list()" class="btn btn-default">Annuleren</a>
			</div>
		
		</form>
		 
	</div>
}