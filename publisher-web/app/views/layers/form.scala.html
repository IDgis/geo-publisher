@(layerForm: Form[controllers.Layers.LayerForm], create: Boolean
, allStyles: java.util.List[nl.idgis.publisher.domain.web.Style]
, layerStyles: java.util.List[nl.idgis.publisher.domain.web.Style])

@import nl.idgis.publisher.domain.web._ 
@layout.application( title=Domain.message("web.application.page.layers.form.title")){

<div class="page-content">
	@if(create){
		<h1 class="page-header">@Domain.message("web.application.page.layers.form.header.new")</h1>
	}else{
		<h1 class="page-header">@Domain.message("web.application.page.layers.form.header.edit", layerForm("name").value) </h1>
	}

	@helper.formerrors(layerForm, Domain.message("web.application.page.layers.name").toLowerCase())	

	
	<div class="row">
		<div class="col-lg-12">
			<form class="form-horizontal" method="post" action="@routes.Layers.submitCreateUpdate()">
				<input type="hidden" class="form-control" id="input-id" name="id" value="@layerForm("id").value" >
				<div class="form-group">
					<label class="col-sm-2 control-label" for="input-dataset">@Domain.message("web.application.page.layers.form.field.dataset.label")</label>
					<div class="col-lg-8">
						<input class="form-control" id="input-dataset" name="dataset" value="@layerForm("name").value" readonly>
						@helper.fielderrors(layerForm("name").errors)
						<span class="help-block">@Domain.message("web.application.page.layers.form.field.dataset.help")</span>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label" for="input-name">@Domain.message("web.application.page.layers.form.field.name.label")</label>
					<div class="col-lg-8">
						<input class="form-control" id="input-name" name="name" placeholder="@Domain.message("web.application.page.layers.form.field.name.placeholder")" value="@layerForm("name").value" @if(!create){readonly}>
						@helper.fielderrors(layerForm("name").errors)
						<span class="help-block">@Domain.message("web.application.page.layers.form.field.name.help")</span>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label" for="input-title">@Domain.message("web.application.page.layers.form.field.title.label")</label>
					<div class="col-lg-8">
						<input class="form-control" id="input-title" name="title" placeholder="@Domain.message("web.application.page.layers.form.field.title.placeholder")" value="@layerForm("title").value">
						@helper.fielderrors(layerForm("title").errors)
						<span class="help-block">@Domain.message("web.application.page.layers.form.field.title.help")</span>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label" for="input-abstractText">@Domain.message("web.application.page.layers.form.field.abstract.label")</label>
					<div class="col-lg-8">
						<textarea class="form-control" id="input-abstractText" name="abstractText" placeholder="@Domain.message("web.application.page.layers.form.field.abstract.placeholder")" value="@layerForm("abstractText").value" rows="4">@layerForm("abstractText").value</textarea>
						@helper.fielderrors(layerForm("abstractText").errors)
						<span class="help-block">@Domain.message("web.application.page.layers.form.field.abstract.help")</span>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label" for="input-keywords">@Domain.message("web.application.page.layers.form.field.keywords.label")</label>
					<div class="col-lg-8">
						<textarea class="form-control" id="input-keywords" name="keywords" placeholder="@Domain.message("web.application.page.layers.form.field.keywords.placeholder")" value="@layerForm("keywords").value" rows="2">@layerForm("keywords").value</textarea>
						@helper.fielderrors(layerForm("keywords").errors)
						<span class="help-block">@Domain.message("web.application.page.layers.form.field.keywords.help")</span>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label" for="input-published">@Domain.message("web.application.page.layers.form.field.publish.label")</label>
					<div class="col-lg-8">
						<div class="input-group input-group-sm">
							<input type="checkbox" class="form-control" id="input-published" name="published" value="true" @if(layerForm("published").value.equals("true")){checked}>
						</div>
						@helper.fielderrors(layerForm("publish").errors)
						<span class="help-block">@Domain.message("web.application.page.layers.form.field.publish.help")</span>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">@Domain.message("web.application.page.layers.form.field.groups.label")</label>
					<div class="col-sm-8">
						<span></span>
					</div>
				</div>
				<div id="stijlen">
					<div class="form-group">
						<label class="col-sm-2 control-label">@Domain.message("web.application.page.layers.form.field.styles.default")</label>
						<div class="col-sm-4">
							<select class="form-control">
							@for(style <- allStyles) {
								<option>@style.name</option>
							}
							</select>
						</div>
						<div class="col-sm-1">
							<button class="btn btn-default btn-sm" type="button" onclick="extra(event)">
								<span class="glyphicon glyphicon-plus"></span>
							</button>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">@Domain.message("web.application.page.layers.form.field.styles.label")</label>
						@for(layerstyle <- layerStyles) {
							<div class="col-sm-4">
								<select class="form-control">
								@for(style <- allStyles) {
									<option>@style.name</option>
								}
								</select>
								<label>@layerstyle.name</label>
							</div>
							<div class="col-sm-1">
								<button class="btn btn-default btn-sm" type="button" onclick="extra(event)">
									<span class="glyphicon glyphicon-minus"></span>
								</button>
							</div>
						}
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button class="btn btn-success" type="submit">@Domain.message("web.application.button.save")</button>
						<a href="@routes.Layers.list()" 
							class="btn btn-success"> @Domain.message("web.application.button.cancel")
						</a>
						<button class="btn btn-success" type="button">@Domain.message("web.application.button.preview")</button>
						<button class="btn btn-success" type="button">@Domain.message("web.application.button.tilingproperties")</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
}

<script>
function extra(e) {
	var node = e.currentTarget;
	var pnode = node.parentNode;
	var ppnode = pnode.parentNode;
	var pppnode = ppnode.parentNode;
	
	var cln = ppnode.cloneNode(true);
	
	var a = cln.childNodes;
	var b = a[5].childNodes;
	var c = b[1].childNodes;
	
	var d = b[1].parentNode;
	var e = d.parentNode;
	
	c[1].className = "glyphicon glyphicon-minus";
	b[1].onclick = function() {pppnode.removeChild(e) }
	
	var lijst = document.getElementById("stijlen");
	lijst.insertBefore(cln, stijlen[1]);
}
</script>